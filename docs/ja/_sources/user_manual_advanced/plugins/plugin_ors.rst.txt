.. index:: Plugin_ORS

.. _plugin_ors:

*************
ORS Tools
*************

.. only:: html

   .. contents::
      :local:

ORS Tools は、OpenRouteService.org の API を利用して、ルート検索や等高線の作成を行う QGIS のプラグインです。

インストールと設定
===================

メニューバーのプラグインから、プラグインの管理とインストールを選びます。
ORS Tools を検索して、インストールします。

インストールすると、メニューバーの Web にメニューが、ツールバーのウェブにアイコンが追加されます。

また、外部サービスを使うため、https://account.heigit.org/ にアクセスして、アカウントを作成し、APIキーを取得します。
取得したAPIキーは、メニューの Web から、ORS Tools の設定を選び、APIキーの欄に貼り付けます。

.. figure:: img/plugin_ors_3.png
   :alt: ORS Tools インストール
   :align: center

点レイヤから到達圏ポリゴンの作成
=================================

まず、点レイヤを用意します。
点レイヤは、QGISで作成したものでも、CSVなどでインポートしたものでも構いません。
ここでは、jpData を使って、宮城県の避難所データをインポートしました。

.. figure:: img/plugin_ors_1.png
   :alt: ORS Tools 点レイヤ
   :align: center

次に、メニューの Web から、ORS Tools を選びます。
ここで、Processing Tools タブを選びます。
Isochrones from Layer ボタンをクリックします。

すると、以下のようなダイアログが表示されます。

.. figure:: img/plugin_ors_4.png
   :alt: ORS Tools メニュー
   :align: center

交通手段としては、自動車や徒歩などを選ぶことができます。
時間又は距離で、等高線を作成できます。
コンマで区切ることで、複数の値を指定できます。
ここでは5分、10分歩行で到達できる範囲を計算します。
また、ID フィールドには、点レイヤのIDフィールドを指定します。
ここでは、P20_002 フィールドを指定しました。

実行しましょう。
すると、以下のように、等高線が作成されます。

.. figure:: img/plugin_ors_5.png
   :alt: ORS Tools メニュー
   :align: center

等高線は、ポリゴンレイヤとして作成されます。

.. Substitutions definitions - AVOID EDITING PAST THIS LINE
   This will be automatically updated by the find_set_subst.py script.
   If you need to create a new substitution manually,
   please add it also to the substitutions.txt file in the
   source folder.

.. |checkbox| image:: /static/common/checkbox.png
   :width: 1.3em
.. |installPluginFromZip| image:: /static/common/mActionInstallPluginFromZip.png
   :width: 1.5em
.. |plugin| image:: /static/common/plugin.png
   :width: 1.5em
.. |plugin-new| image:: /static/common/plugin-new.png
   :width: 1.5em
.. |plugin-upgrade| image:: /static/common/plugin-upgrade.png
   :width: 1.5em
.. |pluginIncompatible| image:: /static/common/plugin-incompatible.png
   :width: 1.5em
.. |pluginInstalled| image:: /static/common/plugin-installed.png
   :width: 1.5em
.. |showPluginManager| image:: /static/common/mActionShowPluginManager.png
   :width: 1.5em
.. |symbologyAdd| image:: /static/common/symbologyAdd.png
   :width: 1.5em
.. |symbologyEdit| image:: /static/common/symbologyEdit.png
   :width: 1.5em
.. |symbologyRemove| image:: /static/common/symbologyRemove.png
   :width: 1.5em
.. |transformSettings| image:: /static/common/mActionTransformSettings.png
   :width: 1.5em
